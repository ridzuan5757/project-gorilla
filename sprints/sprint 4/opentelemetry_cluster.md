# Overview

`k8s` exposes a lot of important telemetry in many different ways. It has logs,
events, metrics for many different objects, and the data generated by its
workloads.

To collect all of this data, we will use the ***OpenTelemetry Collector***. The
collector has many different tools at its disposal which allow it to efficiently
collect all this data and enchance it in meaningful ways.

To collect all the data, we will need ***two installations*** of the collector,
one as a `DaemonSet` and one as a `Deployment`.
- The `Daemonset` installation of the collector will be used to collect
  telemetry emitted by services, logs, and metrics for `nodes`, `pods` and
  `containers`.
- The `Deployment` installation of the collector will be used to collect metrics
  for the cluster and events.

## `DaemonSet` Collector

The first step to collect `k8s` telemetry is to deploy a `DaemonSet` instance of
the OpenTelemetry Collector to gather telemetry related `nodes` and workloads
running on those `nodes`. Each instance of the collector in the `DaemonSet` will
collect data only from the node on which it is running.

This instance of the collector will use the following components:
- `OTLP Receiver` to collect application telemetry data.
- `Kubernetes Attributes Processor` to add `k8s` metadata to incoming
  application telemetry.
- `Kubeletstats Receiver` to pull `node`, `pod` and `container` metrics from the
  API server of the Kubelet.
- `Filelog Receiver` to collect Kubernetes logs and application logs written to
  `stdout`/`stderr`.
- `Hostmetrircs Receiver` to collect hardware metrics data of the `nodes`.

## `Deployment` Collector

The next step to collect telemetry is to deploy a deployment instance of the
Collector to gather telemetry related to the cluster as a whole. A deployment
with ***exactly one replica*** ensures that we do not produce duplicate data.

The instance of the Collector will use the following components:
- `Kubernetes Cluster Receiver` to collect cluster-level metrics and entity
  events.
- `Kubernetes Objects Receiver` to collect objects, such as events from the 
  `k8s` API server.
